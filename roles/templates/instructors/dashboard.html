{% extends "instructors/base.html" %}
<!--  -->
{% load static %}
<!--  -->
{% block content %}
<div class="row">
    <div class="col-lg-12">
        <!-- <h2 class="st_title"><i class="uil uil-apps"></i> Instructor Dashboard</h2> --></div>
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card_dash">
            <div class="card_dash_left">
                <h5>Total Sales</h5>
                <h2>${{profile.get_tutor_total_sales}}</h2>
                <span class="crdbg_1">New ${{profile.get_tutor_latest_sales}}</span>
            </div>
            <div class="card_dash_right">
                <img src="{% static 'images/dashboard/achievement.svg' %}" alt="">
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card_dash">
            <div class="card_dash_left">
                <h5>Total Enroll</h5>
                <h2>1500</h2>
                <span class="crdbg_2">New 125</span>
            </div>
            <div class="card_dash_right">
                <img src="{% static 'images/dashboard/graduation-cap.svg' %}" alt="">
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card_dash">
            <div class="card_dash_left">
                <h5>Total Courses</h5>
                <h2>{{courses.count}}</h2>
                <span class="crdbg_3">New {{new_courses.count}}</span>
            </div>
            <div class="card_dash_right">
                <img src="{% static 'images/dashboard/online-course.svg' %}" alt="">
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-lg-6 col-md-6">
        <div class="card_dash">
            <div class="card_dash_left">
                <h5>Total Students</h5>
                <h2>{{profile.tutor_subscriptions.students.count}}</h2>
                <span class="crdbg_4">New 245</span>
            </div>
            <div class="card_dash_right">
                <img src="{% static 'images/dashboard/knowledge.svg' %}" alt="">
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div class="card_dash1">
            <div class="card_dash_left1">
                <i class="uil uil-book-alt" style="transform: translateY(-0.5rem);"></i>
                <h1>Start a live lesson</h1>
            </div>
            <div class="card_dash_right1">
                <button url="{% url 'instructors:streaming_setup' %}" class="create_btn_dash"><i class='uil uil-video' style="margin-right: 5px;"></i>Go Live</button>
            </div>
        </div>
    </div>
</div>
<!--  -->
<div class="row">
    <div class="col-xl-4 col-lg-6 col-md-6">
        <div class="section3125 mt-50">
            <h4 class="item_title">Latest Courses performance</h4>
            <div class="la5lo1">
                <div class="owl-carousel courses_performance owl-theme">
                    {% for item in profile.get_all_courses %}
                    <div class="item">
                        <div class="fcrse_1">
                            <a href="{{item.get_absolute_url}}" class="fcrse_img">
                                <img src="{% if item.cover %}{{item.cover.url}}{% else %}{% static 'images/courses/img-1.jpg' %}{% endif %}" alt="">
                                <div class="course-overlay"></div>
                            </a>
                            <div class="fcrse_content">
                                <div class="vdtodt">
                                    <span class="vdt14">{{item.created_at|timesince}}</span>
                                </div>
                                <a href="{{item.get_absolute_url}}" class="crsedt145">
                                    {{item.title}}
                                </a>
                                <div class="allvperf">
                                    <div class="crse-perf-left">View</div>
                                    <div class="crse-perf-right">{{item.views}}</div>
                                </div>
                                <div class="allvperf">
                                    <div class="crse-perf-left">Purchased</div>
                                    <div class="crse-perf-right">150</div>
                                </div>
                                <div class="allvperf">
                                    <div class="crse-perf-left">Total Like</div>
                                    <div class="crse-perf-right">{{item.likes}}</div>
                                </div>
                                <div class="auth1lnkprce">
                                    <a href="#" class="cr1fot50">Go to course analytics</a>
                                    <a href="#" class="cr1fot50">See comments (875)</a>
                                    <a href="#" class="cr1fot50">See Reviews ({{item.reviews}})</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-lg-6 col-md-6">
        <div class="section3125 mt-50">
            <h4 class="item_title">News</h4>
            <div class="la5lo1">
                <div class="owl-carousel edututs_news owl-theme">
                    <div class="item">
                        <div class="fcrse_1">
                            <a href="#" class="fcrse_img">
                                <img src="{% static 'images/courses/news-1.jpg' %}" alt="">
                            </a>
                            <div class="fcrse_content">
                                <a href="#" class="crsedt145 mt-15">
                                    COVID-19 Updates & Resources
                                </a
                >
                                <p class="news_des45">
                                    See the latest updates to coronavirus-related content,
                  including changes to monetization, and access new Creator
                  support resources
                                </p>
                                <div class="auth1lnkprce">
                                    <a href="#" class="cr1fot50">Learn More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="fcrse_1">
                            <a href="#" class="fcrse_img">
                                <img src="{% static 'images/courses/news-2.jpg' %}" alt="">
                            </a>
                            <div class="fcrse_content">
                                <a href="#" class="crsedt145 mt-15">
                                    Watch: Edututs+ interview Mr. Joginder
                                </a
                >
                                <p class="news_des45">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                  Aenean ac eleifend ante. Duis ac pulvinar felis. Sed a nibh
                  ligula. Mauris eget tortor id mauris tristique accumsan.
                                </p>
                                <div class="auth1lnkprce">
                                    <a href="#" class="cr1fot50">Watch Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="fcrse_1">
                            <a href="#" class="fcrse_img">
                                <img src="{% static 'images/courses/news-1.jpg' %}" alt="">
                            </a>
                            <div class="fcrse_content">
                                <a href="#" class="crsedt145 mt-15">
                                    COVID-19 Updates - April 7
                                </a
                >
                                <p class="news_des45">
                                    Ut porttitor mi vel orci cursus, nec elementum neque
                  malesuada. Phasellus imperdiet quam gravida pharetra aliquet.
                  Integer vel ligula eget nisl dignissim hendrerit.
                                </p>
                                <div class="auth1lnkprce">
                                    <a href="#" class="cr1fot50">Learn More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-lg-6 col-md-6">
        <div class="section3125 mt-50">
            <h4 class="item_title">Profile Analytics</h4>
            <div class="la5lo1">
                <div class="fcrse_1">
                    <div class="fcrse_content">
                        <h6 class="crsedt8145">Current subscribers</h6>
                        <h3 class="subcribe_title">{{profile.tutor_subscriptions.students.count}}</h3>
                        <div class="allvperf">
                            <div class="crse-perf-left">View</div>
                            <div class="crse-perf-right">
                                17k
                                <span class="analyics_pr">
                                    <i class="uil uil-arrow-to-bottom"></i>
                                    75%
                                </span
                >
                            </div>
                        </div>
                        <div class="allvperf">
                            <div class="crse-perf-left">
                                Purchased
                                <span class="per_text">(per hour)</span>
                            </div>
                            <div class="crse-perf-right">
                                1
                                <span class="analyics_pr">
                                    <i class="uil uil-top-arrow-from-top"></i>
                                    100%
                                </span
                >
                            </div>
                        </div>
                        <div class="allvperf">
                            <div class="crse-perf-left">
                                Enroll
                                <span class="per_text">(per hour)</span>
                            </div>
                            <div class="crse-perf-right">
                                50
                                <span class="analyics_pr">
                                    <i class="uil uil-top-arrow-from-top"></i>
                                    70%
                                </span
                >
                            </div>
                        </div>
                        <div class="auth1lnkprce">
                            <a href="#" class="cr1fot50">Go to profile analytics</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% if courses %}
        <div class="section3125 mt-50">
            <h4 class="item_title">Uploaded Courses</h4>
            <div class="la5lo1">
                <div class="owl-carousel edututs_news owl-theme">
                    {% for course in courses %}
                    <div class="fcrse_1">
                        <div class="fcrse_content">
                            <div class="upcming_card">
                                <a href="{{course.get_absolute_url}}" class="crsedt145">
                                    {{course.title|truncatewords:"28"}}
                                    <br>
                                    <span class="pndng_145">
                                        {{course.get_status_display}}
                                    </span>
                                </a>
                                <p class="submit-course">
                                    Submitted
                                    <span>{{course.created_at|timesince}} ago</span>
                                </p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <a href="{{course.get_delete_url}}" class="delete_link10 delete_course_link">Delete</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
        <div class="section3125 mt-50">
            <h4 class="item_title">What's new in skillcobra?</h4>
            <div class="la5lo1">
                <div class="fcrse_1">
                    <div class="fcrse_content">
                        <a href="#" class="new_links10">
                            Improved performance on Studio Dashboard
                        </a>
                        <a href="#" class="new_links10">See more Dashboard updates</a>
                        <a href="#" class="new_links10">See issues-at-glance for Live</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}
<!--  -->
{% block scripts %}
<!--  -->
{{ block.super }}
<script>
  $(document).ready(function () {
    const currentLocation = window.location.href;
    $(".delete_course_link").each(function(){
      $(this).on("click", function(){
        const url = $(this).attr("href");
        if (confirm("Are you sure you want to delete this course?")) {
          $.ajax({
            type: "POST",
            url: url,
            success: function(response){
              console.log(response);
            },
            error: function(jqXHR, textStatus, errorThrown){},
            complete: function(){
              window.location.href = currentLocation
            }
          })
        }
      else{
        return false;
      }
      });
    });
    $(".create_btn_dash").each(function () {
      $(this).on("click", function () {
        const url = $(this).attr("url");
        window.location.href = url;
      });
    });
  });
</script>
{% endblock scripts %}
